{"ast":null,"code":"import _classCallCheck from \"/home/tuguldursaikhan/Desktop/kaizen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tuguldursaikhan/Desktop/kaizen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tuguldursaikhan/Desktop/kaizen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tuguldursaikhan/Desktop/kaizen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tuguldursaikhan/Desktop/kaizen/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/tuguldursaikhan/Desktop/kaizen/src/routes/components/dataDisplay/Tree/Searchable.js\";\nimport React from \"react\";\nimport { Card, Input, Tree } from \"antd\";\nvar TreeNode = Tree.TreeNode;\nvar Search = Input.Search;\nvar x = 3;\nvar y = 2;\nvar z = 1;\nvar gData = [];\n\nvar generateData = function generateData(_level, _preKey, _tns) {\n  var preKey = _preKey || '0';\n  var tns = _tns || gData;\n  var children = [];\n\n  for (var i = 0; i < x; i++) {\n    var key = \"\".concat(preKey, \"-\").concat(i);\n    tns.push({\n      title: key,\n      key: key\n    });\n\n    if (i < y) {\n      children.push(key);\n    }\n  }\n\n  if (_level < 0) {\n    return tns;\n  }\n\n  var level = _level - 1;\n  children.forEach(function (key, index) {\n    tns[index].children = [];\n    return generateData(level, key, tns[index].children);\n  });\n};\n\ngenerateData(z);\nvar dataList = [];\n\nvar generateList = function generateList(data) {\n  for (var i = 0; i < data.length; i++) {\n    var node = data[i];\n    var key = node.key;\n    dataList.push({\n      key: key,\n      title: key\n    });\n\n    if (node.children) {\n      generateList(node.children, node.key);\n    }\n  }\n};\n\ngenerateList(gData);\n\nvar getParentKey = function getParentKey(key, tree) {\n  var parentKey;\n\n  for (var i = 0; i < tree.length; i++) {\n    var node = tree[i];\n\n    if (node.children) {\n      if (node.children.some(function (item) {\n        return item.key === key;\n      })) {\n        parentKey = node.key;\n      } else if (getParentKey(key, node.children)) {\n        parentKey = getParentKey(key, node.children);\n      }\n    }\n  }\n\n  return parentKey;\n};\n\nvar Searchable =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Searchable, _React$Component);\n\n  function Searchable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Searchable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Searchable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      expandedKeys: [],\n      searchValue: '',\n      autoExpandParent: true\n    };\n\n    _this.onExpand = function (expandedKeys) {\n      _this.setState({\n        expandedKeys: expandedKeys,\n        autoExpandParent: false\n      });\n    };\n\n    _this.onChange = function (e) {\n      var value = e.target.value;\n      var expandedKeys = dataList.map(function (item) {\n        if (item.key.indexOf(value) > -1) {\n          return getParentKey(item.key, gData);\n        }\n\n        return null;\n      }).filter(function (item, i, self) {\n        return item && self.indexOf(item) === i;\n      });\n\n      _this.setState({\n        expandedKeys: expandedKeys,\n        searchValue: value,\n        autoExpandParent: true\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Searchable, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          searchValue = _this$state.searchValue,\n          expandedKeys = _this$state.expandedKeys,\n          autoExpandParent = _this$state.autoExpandParent;\n\n      var loop = function loop(data) {\n        return data.map(function (item) {\n          var index = item.key.indexOf(searchValue);\n          var beforeStr = item.key.substr(0, index);\n          var afterStr = item.key.substr(index + searchValue.length);\n          var title = index > -1 ? React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 97\n            },\n            __self: this\n          }, beforeStr, React.createElement(\"span\", {\n            style: {\n              color: '#f50'\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 99\n            },\n            __self: this\n          }, searchValue), afterStr) : React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }, item.key);\n\n          if (item.children) {\n            return React.createElement(TreeNode, {\n              key: item.key,\n              title: title,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 105\n              },\n              __self: this\n            }, loop(item.children));\n          }\n\n          return React.createElement(TreeNode, {\n            key: item.key,\n            title: title,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          });\n        });\n      };\n\n      return React.createElement(Card, {\n        title: \"Searchable\",\n        className: \"gx-card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(Search, {\n        style: {\n          marginBottom: 8\n        },\n        placeholder: \"Search\",\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(Tree, {\n        onExpand: this.onExpand,\n        expandedKeys: expandedKeys,\n        autoExpandParent: autoExpandParent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, loop(gData)));\n    }\n  }]);\n\n  return Searchable;\n}(React.Component);\n\nexport default Searchable;","map":{"version":3,"sources":["/home/tuguldursaikhan/Desktop/kaizen/src/routes/components/dataDisplay/Tree/Searchable.js"],"names":["React","Card","Input","Tree","TreeNode","Search","x","y","z","gData","generateData","_level","_preKey","_tns","preKey","tns","children","i","key","push","title","level","forEach","index","dataList","generateList","data","length","node","getParentKey","tree","parentKey","some","item","Searchable","state","expandedKeys","searchValue","autoExpandParent","onExpand","setState","onChange","e","value","target","map","indexOf","filter","self","loop","beforeStr","substr","afterStr","color","marginBottom","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {Card, Input, Tree} from \"antd\";\n\nconst TreeNode = Tree.TreeNode;\nconst Search = Input.Search;\n\nconst x = 3;\nconst y = 2;\nconst z = 1;\nconst gData = [];\n\nconst generateData = (_level, _preKey, _tns) => {\n  const preKey = _preKey || '0';\n  const tns = _tns || gData;\n\n  const children = [];\n  for (let i = 0; i < x; i++) {\n    const key = `${preKey}-${i}`;\n    tns.push({title: key, key});\n    if (i < y) {\n      children.push(key);\n    }\n  }\n  if (_level < 0) {\n    return tns;\n  }\n  const level = _level - 1;\n  children.forEach((key, index) => {\n    tns[index].children = [];\n    return generateData(level, key, tns[index].children);\n  });\n};\ngenerateData(z);\n\nconst dataList = [];\nconst generateList = (data) => {\n  for (let i = 0; i < data.length; i++) {\n    const node = data[i];\n    const key = node.key;\n    dataList.push({key, title: key});\n    if (node.children) {\n      generateList(node.children, node.key);\n    }\n  }\n};\ngenerateList(gData);\n\nconst getParentKey = (key, tree) => {\n  let parentKey;\n  for (let i = 0; i < tree.length; i++) {\n    const node = tree[i];\n    if (node.children) {\n      if (node.children.some(item => item.key === key)) {\n        parentKey = node.key;\n      } else if (getParentKey(key, node.children)) {\n        parentKey = getParentKey(key, node.children);\n      }\n    }\n  }\n  return parentKey;\n};\n\nclass Searchable extends React.Component {\n  state = {\n    expandedKeys: [],\n    searchValue: '',\n    autoExpandParent: true,\n  };\n  onExpand = (expandedKeys) => {\n    this.setState({\n      expandedKeys,\n      autoExpandParent: false,\n    });\n  };\n  onChange = (e) => {\n    const value = e.target.value;\n    const expandedKeys = dataList.map((item) => {\n      if (item.key.indexOf(value) > -1) {\n        return getParentKey(item.key, gData);\n      }\n      return null;\n    }).filter((item, i, self) => item && self.indexOf(item) === i);\n    this.setState({\n      expandedKeys,\n      searchValue: value,\n      autoExpandParent: true,\n    });\n  };\n\n  render() {\n    const {searchValue, expandedKeys, autoExpandParent} = this.state;\n    const loop = data => data.map((item) => {\n      const index = item.key.indexOf(searchValue);\n      const beforeStr = item.key.substr(0, index);\n      const afterStr = item.key.substr(index + searchValue.length);\n      const title = index > -1 ? (\n        <span>\n          {beforeStr}\n          <span style={{color: '#f50'}}>{searchValue}</span>\n          {afterStr}\n        </span>\n      ) : <span>{item.key}</span>;\n      if (item.children) {\n        return (\n          <TreeNode key={item.key} title={title}>\n            {loop(item.children)}\n          </TreeNode>\n        );\n      }\n      return <TreeNode key={item.key} title={title}/>;\n    });\n    return (\n      <Card title=\"Searchable\" className=\"gx-card\">\n        <Search style={{marginBottom: 8}} placeholder=\"Search\" onChange={this.onChange}/>\n        <Tree\n          onExpand={this.onExpand}\n          expandedKeys={expandedKeys}\n          autoExpandParent={autoExpandParent}\n        >\n          {loop(gData)}\n        </Tree>\n      </Card>\n    );\n  }\n}\n\nexport default Searchable;\n"]},"metadata":{},"sourceType":"module"}